# –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞ Simple Service

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. ‚úÖ **Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Ñ—É–Ω–∫—Ü–∏—è `Authorization` –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω, —Ç–æ–ª—å–∫–æ –≤—ã–∑—ã–≤–∞–µ—Ç `c.Next()` - **–ò–°–ü–†–ê–í–õ–ï–ù–û: –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ JWT —Å –ø–æ–ª–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π**
2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã –ø–æ–ª–µ–π** - –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ `title` –∏ `description`

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

3. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ HTTP-—Å–ª–æ—è –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** - **–ò–°–ü–†–ê–í–õ–ï–ù–û: —Å–æ–∑–¥–∞–Ω handlers —Å–ª–æ–π, —É–±—Ä–∞–Ω *fiber.Ctx –∏–∑ Service**
   - ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã
   - ‚úÖ –£–±—Ä–∞—Ç—å `*fiber.Ctx` –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Service`

4. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** - **–ò–°–ü–†–ê–í–õ–ï–ù–û: —Å–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π —Å –∞–≤—Ç–æ–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º**

5. ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å graceful shutdown** - **–ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**

## üìä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

6. **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–¥–∞—á**:
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á
   - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
   - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

7. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

8. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**:
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –ë–î
   - ‚úÖ –¢–µ—Å—Ç—ã middleware - **–î–û–ë–ê–í–õ–ï–ù–û: –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è JWT middleware**
   - –¢–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   - HTTP —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## üöÄ DevOps –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

9. **–î–æ–±–∞–≤–∏—Ç—å Dockerfile** –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
10. **Docker Compose** —Å PostgreSQL –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
11. **Makefile** —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
12. **CI/CD pipeline** (GitHub Actions)

## üìà Monitoring –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

13. **Metrics –∏ health checks**:
   - Prometheus –º–µ—Ç—Ä–∏–∫–∏
   - Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç
   - Structured logging —É–ª—É—á—à–µ–Ω–∏—è

14. **Tracing** - –¥–æ–±–∞–≤–∏—Ç—å OpenTelemetry

## üîß –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

15. **Linting –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: golangci-lint –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
16. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫
17. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

18. **OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –∫–æ–¥–∞
19. **README —É–ª—É—á—à–µ–Ω–∏—è** - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** (–ø—É–Ω–∫—Ç—ã 1-2)
2. ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è** (–ø—É–Ω–∫—Ç—ã 3-5) - **–ó–ê–í–ï–†–®–ï–ù–û**
3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏** (–ø—É–Ω–∫—Ç—ã 6-7)
4. **–û—Å—Ç–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è** (–ø—É–Ω–∫—Ç—ã 8-19)

## –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```go
// –°–¢–ê–†–´–ô –∫–æ–¥ (–ù–ï –†–ê–ë–û–¢–ê–õ):
func Authorization(token string) fiber.Handler {
    return func(c *fiber.Ctx) error {
        // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        return c.Next() // ‚Üê –ù–ï –ü–†–û–í–ï–†–Ø–ï–¢ –¢–û–ö–ï–ù!
    }
}

// –ù–û–í–´–ô –∫–æ–¥ (JWT —Å –ø–æ–ª–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π):
func JWTAuthorization(secretKey string) fiber.Handler {
    return func(c *fiber.Ctx) error {
        // –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏, –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏, —Ñ–æ—Ä–º–∞—Ç–∞
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ claims –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    }
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- –í `TaskRequest` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è `validate:"max=255"` –¥–ª—è title
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã –¥–ª—è title
- Description –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã

## –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ HTTP-—Å–ª–æ—è –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```go
// –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å–ª–æ–π handlers:
// internal/api/handlers/handlers.go
type TaskHandler struct {
    service service.Service
    log     *zap.SugaredLogger
}

// HTTP-–ª–æ–≥–∏–∫–∞ —Ç–µ–ø–µ—Ä—å –≤ handlers, Service —Ç–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
func (h *TaskHandler) CreateTask(ctx *fiber.Ctx) error {
    // HTTP –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–¥–µ—Å—å
    taskID, err := h.service.CreateTask(ctx.Context(), req)
    // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –æ—Ç–≤–µ—Ç–∞ –∑–¥–µ—Å—å
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```go
// –°–æ–∑–¥–∞–Ω internal/migrations/migrations.go
func RunMigrations(ctx context.Context, pool *pgxpool.Pool, logger *zap.SugaredLogger) error {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
    // –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ schema_migrations —Ç–∞–±–ª–∏—Ü—É
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: Graceful shutdown ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```go
// –í main.go –¥–æ–±–∞–≤–ª–µ–Ω–æ:
ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)
defer cancel()

if err := app.ShutdownWithContext(ctx); err != nil {
    logger.Errorf("Server shutdown error: %v", err)
}
repository.Close() // –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
```

## ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```go
// –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã Logger
// –£–±—Ä–∞–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω–∞—è –ø–∞–ø–∫–∞ internal/adapters/
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è *zap.SugaredLogger –Ω–∞–ø—Ä—è–º—É—é –≤–æ –≤—Å–µ—Ö —Å–ª–æ—è—Ö

// –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:
// service/service.go - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Repository interface (consumer)
type Repository interface {
    CreateTask(ctx context.Context, task Task) (int, error)
}

// repo/repo.go - —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func (r *repository) CreateTask(ctx context.Context, task service.Task) (int, error)
```

### DevOps —É–ª—É—á—à–µ–Ω–∏—è ‚úÖ –ß–ê–°–¢–ò–ß–ù–û
- ‚úÖ **.gitignore** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Go –ø—Ä–æ–µ–∫—Ç–∞, local.env, IDE —Ñ–∞–π–ª—ã
- ‚úÖ **VS Code –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–Ω launch.json –¥–ª—è debug

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã**. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ø—É–Ω–∫—Ç 2), –∑–∞—Ç–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–ø—É–Ω–∫—Ç—ã 6-7).
